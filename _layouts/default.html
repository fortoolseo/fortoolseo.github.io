<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% if page.title %}
            {{ page.title }} | {{ site.title | default: "FortoolSEO Blog" }}
        {% else %}
            {{ site.title | default: "FortoolSEO Blog" }} | {{ site.description | default: "SEO Tools & Tutorials" }}
        {% endif %}
    </title>
    <meta name="description" content="{{ page.description | default: site.description | default: 'Blog tentang SEO, Tools Gratis, dan tips digital marketing.' }}">
    
    <!-- SEO Meta Tags -->
    <meta property="og:title" content="{{ page.title | default: site.title }}">
    <meta property="og:description" content="{{ page.description | default: site.description }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    {% if site.logo %}
    <meta property="og:image" content="{{ site.url }}{{ site.logo }}">
    {% endif %}
    
    <!-- CSS EKSTERNAL -->
    <link rel="stylesheet" href="/assets/css/style.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    
    <!-- Konfigurasi Pagination di _config.yml -->
    <!-- paginate: 8 -->
    <!-- paginate_path: "/blog/page:num/" -->
</head>
<body>
    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- HEADER -->
    <header class="site-header">
        <div class="container header-container">
            <div class="header-brand">
                <div class="site-logo">
                    <a href="/" class="logo-text">
                        <span class="site-name">{{ site.title | default: "FortoolSEO" }}</span>
                    </a>
                </div>
                <p class="site-tagline">{{ site.description | default: "Blog tentang SEO dan tools gratis" }}</p>
            </div>

            <!-- Desktop Navigation -->
            <nav class="main-nav" aria-label="Main Navigation">
                <ul class="nav-list">
                    <li><a href="/" {% if page.url == "/" %}class="active"{% endif %}>Home</a></li>
                    <li><a href="/categories/" {% if page.url contains "/categories" %}class="active"{% endif %}>Categories</a></li>
                    <li><a href="/tags/" {% if page.url contains "/tags" %}class="active"{% endif %}>Tags</a></li>
                    <li><a href="/about/" {% if page.url contains "/about" %}class="active"{% endif %}>About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main id="main-content" class="main-wrapper container">
        <div class="content-layout">
            <!-- MAIN CONTENT AREA -->
            <div class="primary-content">
                {% if page.url == "/" or page.url contains "/blog/" %}
                <!-- HOMEPAGE & PAGINATION PAGES -->
                
                <!-- Hero Section -->
                <section class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">Panduan & Tools SEO Terbaru</h1>
                        <p class="hero-description">Temukan tutorial mendalam, analisis tools gratis, dan strategi untuk meningkatkan ranking website Anda.</p>
                    </div>
                </section>

                <!-- All Posts Grid with Pagination -->
                <section class="all-posts">
                    <h2 class="section-title"><span>üìö Artikel Terbaru</span></h2>
                    
                    <!-- Info Pagination -->
                    <div class="pagination-info">
                        {% if paginator %}
                        <p>Halaman {{ paginator.page }} dari {{ paginator.total_pages }} - Menampilkan {{ paginator.posts | size }} artikel</p>
                        {% endif %}
                    </div>
                    
                    <div class="posts-grid">
                        {% if paginator %}
                            {% for post in paginator.posts %}
                            <article class="post-card">
                                <!-- Thumbnail: Otomatis dari gambar pertama -->
                                <div class="post-card-image">
                                    {% comment %}
                                    Cari gambar pertama dari konten artikel
                                    {% endcomment %}
                                    {% assign first_image = "" %}
                                    {% assign content_text = post.content %}
                                    
                                    {% comment %} Mencari tag img dalam konten {% endcomment %}
                                    {% if content_text contains '<img' %}
                                        {% assign img_start = content_text | split: '<img' %}
                                        {% if img_start[1] %}
                                            {% assign img_tag = img_start[1] | split: '>' | first %}
                                            {% assign src_start = img_tag | split: 'src="' %}
                                            {% if src_start[1] %}
                                                {% assign first_image = src_start[1] | split: '"' | first %}
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                    
                                    {% if first_image != "" %}
                                        <img src="{{ first_image }}" alt="{{ post.title }}" loading="lazy">
                                    {% elsif post.image %}
                                        <img src="{{ post.image }}" alt="{{ post.title }}" loading="lazy">
                                    {% elsif post.thumbnail %}
                                        <img src="{{ post.thumbnail }}" alt="{{ post.title }}" loading="lazy">
                                    {% else %}
                                        <div class="thumbnail-placeholder">
                                            <span class="placeholder-icon">üìù</span>
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <!-- Card Content -->
                                <div class="post-card-content">
                                    <div class="post-card-meta">
                                        <time datetime="{{ post.date | date_to_xmlschema }}">
                                            {{ post.date | date: "%d %b %Y" }}
                                        </time>
                                        {% if post.categories.first %}
                                        <span class="meta-separator">‚Ä¢</span>
                                        <span class="post-category">{{ post.categories.first }}</span>
                                        {% endif %}
                                    </div>
                                    
                                    <h3 class="post-card-title">
                                        <a href="{{ post.url }}">{{ post.title }}</a>
                                    </h3>
                                    
                                    <p class="post-card-excerpt">
                                        {% if post.excerpt %}
                                            {{ post.excerpt | strip_html | truncatewords: 20 }}
                                        {% else %}
                                            {% assign excerpt_content = post.content | strip_html %}
                                            {{ excerpt_content | truncatewords: 20 }}
                                        {% endif %}
                                    </p>
                                    
                                    <div class="post-card-footer">
                                        {% if post.categories.size > 0 %}
                                        <div class="post-card-categories">
                                            {% for category in post.categories limit:2 %}
                                            <a href="/categories/{{ category | slugify }}/" class="category-tag">
                                                {{ category }}
                                            </a>
                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                        
                                        <a href="{{ post.url }}" class="post-card-link">‚Üí</a>
                                    </div>
                                </div>
                            </article>
                            {% endfor %}
                        {% else %}
                            <!-- Fallback jika paginator tidak aktif -->
                            {% for post in site.posts limit:8 %}
                            <article class="post-card">
                                <!-- Thumbnail: Otomatis dari gambar pertama -->
                                <div class="post-card-image">
                                    {% assign first_image = "" %}
                                    {% assign content_text = post.content %}
                                    
                                    {% if content_text contains '<img' %}
                                        {% assign img_start = content_text | split: '<img' %}
                                        {% if img_start[1] %}
                                            {% assign img_tag = img_start[1] | split: '>' | first %}
                                            {% assign src_start = img_tag | split: 'src="' %}
                                            {% if src_start[1] %}
                                                {% assign first_image = src_start[1] | split: '"' | first %}
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                    
                                    {% if first_image != "" %}
                                        <img src="{{ first_image }}" alt="{{ post.title }}" loading="lazy">
                                    {% elsif post.image %}
                                        <img src="{{ post.image }}" alt="{{ post.title }}" loading="lazy">
                                    {% elsif post.thumbnail %}
                                        <img src="{{ post.thumbnail }}" alt="{{ post.title }}" loading="lazy">
                                    {% else %}
                                        <div class="thumbnail-placeholder">
                                            <span class="placeholder-icon">üìù</span>
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <div class="post-card-content">
                                    <div class="post-card-meta">
                                        <time datetime="{{ post.date | date_to_xmlschema }}">
                                            {{ post.date | date: "%d %b %Y" }}
                                        </time>
                                        {% if post.categories.first %}
                                        <span class="meta-separator">‚Ä¢</span>
                                        <span class="post-category">{{ post.categories.first }}</span>
                                        {% endif %}
                                    </div>
                                    
                                    <h3 class="post-card-title">
                                        <a href="{{ post.url }}">{{ post.title }}</a>
                                    </h3>
                                    
                                    <p class="post-card-excerpt">
                                        {% if post.excerpt %}
                                            {{ post.excerpt | strip_html | truncatewords: 20 }}
                                        {% else %}
                                            {% assign excerpt_content = post.content | strip_html %}
                                            {{ excerpt_content | truncatewords: 20 }}
                                        {% endif %}
                                    </p>
                                    
                                    <div class="post-card-footer">
                                        {% if post.categories.size > 0 %}
                                        <div class="post-card-categories">
                                            {% for category in post.categories limit:2 %}
                                            <a href="/categories/{{ category | slugify }}/" class="category-tag">
                                                {{ category }}
                                            </a>
                                            {% endfor %}
                                        </div>
                                        {% endif %}
                                        
                                        <a href="{{ post.url }}" class="post-card-link">‚Üí</a>
                                    </div>
                                </div>
                            </article>
                            {% endfor %}
                        {% endif %}
                    </div>
                    
                    <!-- PAGINATION NAVIGATION -->
                    {% if paginator and paginator.total_pages > 1 %}
                    <nav class="pagination" aria-label="Navigasi Halaman">
                        <!-- First Page -->
                        {% if paginator.page > 2 %}
                        <a href="{{ site.paginate_path | replace: ':num', 1 | replace: '/blog/', '/' }}" class="pagination-link first-page" aria-label="Halaman pertama">
                            ¬´¬´
                        </a>
                        {% endif %}
                        
                        <!-- Previous Page -->
                        {% if paginator.previous_page %}
                        <a href="{{ paginator.previous_page_path }}" class="pagination-link prev-page" aria-label="Halaman sebelumnya">
                            ¬´
                        </a>
                        {% endif %}
                        
                        <!-- Page Numbers -->
                        {% assign start_page = paginator.page | minus: 2 %}
                        {% assign end_page = paginator.page | plus: 2 %}
                        
                        {% if start_page < 1 %}
                            {% assign start_page = 1 %}
                        {% endif %}
                        
                        {% if end_page > paginator.total_pages %}
                            {% assign end_page = paginator.total_pages %}
                        {% endif %}
                        
                        {% for page_num in (start_page..end_page) %}
                            {% if page_num == paginator.page %}
                            <span class="pagination-link current-page" aria-current="page">
                                {{ page_num }}
                            </span>
                            {% elsif page_num == 1 %}
                            <a href="/" class="pagination-link">
                                {{ page_num }}
                            </a>
                            {% else %}
                            <a href="{{ site.paginate_path | replace: ':num', page_num | replace: '/blog/', '/' }}" class="pagination-link">
                                {{ page_num }}
                            </a>
                            {% endif %}
                        {% endfor %}
                        
                        <!-- Next Page -->
                        {% if paginator.next_page %}
                        <a href="{{ paginator.next_page_path }}" class="pagination-link next-page" aria-label="Halaman berikutnya">
                            ¬ª
                        </a>
                        {% endif %}
                        
                        <!-- Last Page -->
                        {% if paginator.page < paginator.total_pages | minus: 1 %}
                        <a href="{{ site.paginate_path | replace: ':num', paginator.total_pages | replace: '/blog/', '/' }}" class="pagination-link last-page" aria-label="Halaman terakhir">
                            ¬ª¬ª
                        </a>
                        {% endif %}
                    </nav>
                    {% endif %}
                </section>

                {% else %}
                <!-- SINGLE ARTICLE PAGE -->
                <article class="single-post">
                    <header class="post-header">
                        <div class="post-meta">
                            <time datetime="{{ page.date | date_to_xmlschema }}" class="post-date">
                                {{ page.date | date: "%d %B %Y" }}
                            </time>
                            {% if page.categories.size > 0 %}
                            <span class="meta-separator">‚Ä¢</span>
                            <div class="post-categories">
                                {% for category in page.categories %}
                                <a href="/categories/{{ category | slugify }}/" class="category-badge">{{ category }}</a>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        <h1 class="post-title">{{ page.title }}</h1>
                    </header>

                    <div class="post-content">
                        {{ content }}
                    </div>

                    {% if page.tags.size > 0 %}
                    <footer class="post-footer">
                        <div class="post-tags">
                            <strong>Tags:</strong>
                            {% for tag in page.tags %}
                            <a href="/tags/{{ tag | slugify }}/" class="post-tag">{{ tag }}</a>
                            {% endfor %}
                        </div>
                    </footer>
                    {% endif %}
                </article>
                {% endif %}
            </div>

            <!-- SIDEBAR -->
            <aside class="sidebar">
                <!-- About Widget -->
                <div class="sidebar-widget">
                    <div class="widget-header">
                        <h3 class="widget-title">üëã Tentang Blog</h3>
                    </div>
                    <div class="widget-content">
                        <p>Blog ini membahas tools SEO gratis, tutorial, dan strategi untuk meningkatkan performa website. Dibuat untuk membantu pemula dan profesional.</p>
                    </div>
                </div>

                <!-- Categories Widget -->
                <div class="sidebar-widget">
                    <div class="widget-header">
                        <h3 class="widget-title">üìÇ Kategori</h3>
                    </div>
                    <div class="widget-content">
                        <ul class="category-list">
                            {% assign categories = site.categories | sort %}
                            {% for category in categories %}
                            <li>
                                <a href="/categories/{{ category[0] | slugify }}/">
                                    {{ category[0] }}
                                    <span class="category-count">({{ category[1].size }})</span>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>

                <!-- Recent Posts Widget -->
                <div class="sidebar-widget">
                    <div class="widget-header">
                        <h3 class="widget-title">üïê Terbaru</h3>
                    </div>
                    <div class="widget-content">
                        <ul class="recent-posts-list">
                            {% for post in site.posts limit:5 %}
                            <li>
                                <a href="{{ post.url }}" class="recent-post-title">{{ post.title }}</a>
                                <span class="recent-post-date">{{ post.date | date: "%d %b" }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="site-footer">
        <div class="footer-container container">
            <div class="footer-bottom">
                <div class="footer-copyright">
                    &copy; {{ site.time | date: "%Y" }} {{ site.title | default: "FortoolSEO Blog" }}. All rights reserved.
                </div>
                <div class="footer-credits">
                    Dibuat dengan ‚ù§Ô∏è menggunakan <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a> & <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a>.
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript untuk pagination dan thumbnail -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Fungsi untuk mengekstrak gambar pertama dari artikel
        function extractFirstImage(content) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(content, 'text/html');
            const firstImg = doc.querySelector('img');
            return firstImg ? firstImg.src : null;
        }
        
        // Jika thumbnail tidak ada, coba ambil dari gambar pertama dalam konten
        document.querySelectorAll('.post-card').forEach(card => {
            const thumbnail = card.querySelector('.post-card-image img');
            if (!thumbnail || thumbnail.getAttribute('src') === '') {
                const content = card.querySelector('.post-card-excerpt').textContent;
                // Di sini Anda bisa menambahkan logika untuk mengambil gambar pertama
                // dari konten artikel asli jika diperlukan
            }
        });
        
        // Tambahkan styling untuk pagination aktif
        const currentPage = document.querySelector('.pagination .current-page');
        if (currentPage) {
            currentPage.style.fontWeight = 'bold';
            currentPage.style.color = '#fff';
            currentPage.style.backgroundColor = '#4285f4';
        }
    });
    </script>
</body>
</html>
