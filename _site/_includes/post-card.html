<article class="post-card">
    <!-- Thumbnail: Otomatis dari gambar pertama -->
    <div class="post-card-image">
        {% comment %} Ekstrak gambar pertama dari konten {% endcomment %}
        {% assign first_image = "" %}
        {% assign content_text = include.post.content %}
        
        {% comment %} Mencari tag img dalam konten {% endcomment %}
        {% if content_text contains '<img' %}
            {% assign img_start = content_text | split: '<img' %}
            {% if img_start[1] %}
                {% assign img_tag = img_start[1] | split: '>' | first %}
                {% assign src_start = img_tag | split: 'src="' %}
                {% if src_start[1] %}
                    {% assign first_image = src_start[1] | split: '"' | first %}
                {% endif %}
            {% endif %}
        {% endif %}
        
        {% if first_image != "" %}
            <img src="{{ first_image }}" alt="{{ include.post.title }}" loading="lazy">
        {% elsif include.post.image %}
            <img src="{{ include.post.image }}" alt="{{ include.post.title }}" loading="lazy">
        {% elsif include.post.thumbnail %}
            <img src="{{ include.post.thumbnail }}" alt="{{ include.post.title }}" loading="lazy">
        {% else %}
            <div class="thumbnail-placeholder">
                <span class="placeholder-icon">üìù</span>
            </div>
        {% endif %}
    </div>
    
    <!-- Card Content -->
    <div class="post-card-content">
        <div class="post-card-meta">
            <time datetime="{{ include.post.date | date_to_xmlschema }}">
                {{ include.post.date | date: "%d %b %Y" }}
            </time>
            {% if include.post.categories.first %}
            <span class="meta-separator">‚Ä¢</span>
            <span class="post-category">{{ include.post.categories.first }}</span>
            {% endif %}
        </div>
        
        <h3 class="post-card-title">
            <a href="{{ include.post.url }}">{{ include.post.title }}</a>
        </h3>
        
        <p class="post-card-excerpt">
            {% if include.post.excerpt %}
                {{ include.post.excerpt | strip_html | truncatewords: 20 }}
            {% else %}
                {% assign excerpt_content = include.post.content | strip_html %}
                {{ excerpt_content | truncatewords: 20 }}
            {% endif %}
        </p>
        
        <div class="post-card-footer">
            {% if include.post.categories.size > 0 %}
            <div class="post-card-categories">
                {% for category in include.post.categories limit:2 %}
                <a href="/categories/{{ category | slugify }}/" class="category-tag">
                    {{ category }}
                </a>
                {% endfor %}
            </div>
            {% endif %}
            
            <a href="{{ include.post.url }}" class="post-card-link">‚Üí</a>
        </div>
    </div>
</article>
